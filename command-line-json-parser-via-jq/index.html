<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Basic Page Needs
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8">
    <title>Command line JSON parser via jq | blog.danclaudiupop | Software Testing and more</title>
    <meta name="description" content="blog.danclaudiupop, Software Testing and more">
    <meta name="author" content="danclaudiupop">

    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Feeds
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="alternate" href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" title="blog.danclaudiupop Atom Feed" />

    <!-- FONT
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata">

    <!-- CSS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css">
    <link rel="stylesheet" href="http://blog.danclaudiupop.com/theme/css/custom.css">
    <link rel="stylesheet" href="http://blog.danclaudiupop.com/theme/css/pygments.css">

    <!-- Scripts
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://blog.danclaudiupop.com/theme/js/site.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.js"></script>
    <script>
        $(document).ready(function(){
            $(".container").fitVids();
        });
    </script>

    <!-- Favicon
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="icon" type="image/png" href="http://blog.danclaudiupop.com/theme/assets/favicon.png">

</head>
<body>

    <!-- Primary Page Layout
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <div class="container">
        <section class="header">
            <img src="/theme/assets/stewie.jpg" class="logo">
        </section>
    </div>
    <div class="container">
        <nav class="navbar">
            <div class="container">
                <ul class="navbar-list">
                    <li class="navbar-item"><a href="http://blog.danclaudiupop.com/" class="navbar-link">Posts</a></li>
                    <li class="navbar-item"><a href="http://blog.danclaudiupop.com/about-us.html" class="navbar-link">About</a></li>
                    <li class="navbar-icon">
                        <a href="http://blog.danclaudiupop.com/feeds/all.atom.xml">
                            <i class="fa fa-rss fa-fw fa-2x"></i>
                        </a>
                    </li>
                    <li class="navbar-icon">
                        <a href="https://github.com/danclaudiupop/">
                            <i class="fa fa-github fa-fw fa-2x"></i>
                        </a>
                    </li>
                    <li class="navbar-icon">
                        <a href="https://twitter.com/danclaudiupop">
                            <i class="fa fa-twitter fa-fw fa-2x"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <div class="container">
        <section class="post">
            <header class="post-header">
                <h3>Command line JSON parser via jq</h3>
                <p class="post-meta">
                    Lu 14 octombrie 2013 &middot; tagged 
                        <a class="post-category" href="http://blog.danclaudiupop.com/tag/unix.html">unix</a>
                </p>
            </header>
        </section>
        <section class="post-content">
            <p>A command-line JSON parser can be handy when you test or debug JSON web
services. Unfortunately inspecting JSON responses via command line are hard to
read and not easy to manipulate with traditional Unix utilities.</p>
<p>Today I stumbled on <a class="reference external" href="http://stedolan.github.io/jq/">jq</a>, via <a class="reference external" href="https://github.com/limpangel">Angel Ramboi</a>. <tt class="docutils literal">jq</tt> is a lightweight and flexible
command-line JSON processor.</p>
<p>Download the desired binary and then <tt class="docutils literal">chmod +x ./jq</tt>.</p>
<p>I've prepared a sample json so we can see how easily it is to inspect and
manipulate JSON strings.</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">json</span>

<span class="p">{</span>
    <span class="s">&quot;first&quot;</span><span class="p">:</span> <span class="s">&quot;John&quot;</span><span class="p">,</span>
    <span class="s">&quot;last&quot;</span><span class="p">:</span> <span class="s">&quot;Doe&quot;</span><span class="p">,</span>
    <span class="s">&quot;age&quot;</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="s">&quot;sex&quot;</span><span class="p">:</span> <span class="s">&quot;M&quot;</span><span class="p">,</span>
    <span class="s">&quot;registered&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">&quot;interests&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s">&quot;Reading&quot;</span><span class="p">,</span> <span class="s">&quot;Mountain Biking&quot;</span><span class="p">,</span> <span class="s">&quot;Hacking&quot;</span> <span class="p">],</span>
    <span class="s">&quot;favorites&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;color&quot;</span><span class="p">:</span> <span class="s">&quot;Blue&quot;</span><span class="p">,</span>
        <span class="s">&quot;sport&quot;</span><span class="p">:</span> <span class="s">&quot;Soccer&quot;</span><span class="p">,</span>
        <span class="s">&quot;food&quot;</span><span class="p">:</span> <span class="s">&quot;Spaghetti&quot;</span>
    <span class="p">},</span>
    <span class="s">&quot;skills&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s">&quot;category&quot;</span><span class="p">:</span> <span class="s">&quot;Python&quot;</span><span class="p">,</span>
            <span class="s">&quot;tests&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;One&quot;</span><span class="p">,</span> <span class="s">&quot;score&quot;</span><span class="p">:</span> <span class="mi">90</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;Two&quot;</span><span class="p">,</span> <span class="s">&quot;score&quot;</span><span class="p">:</span> <span class="mi">96</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s">&quot;category&quot;</span><span class="p">:</span> <span class="s">&quot;GO&quot;</span><span class="p">,</span>
            <span class="s">&quot;tests&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;One&quot;</span><span class="p">,</span> <span class="s">&quot;score&quot;</span><span class="p">:</span> <span class="mi">32</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;Two&quot;</span><span class="p">,</span> <span class="s">&quot;score&quot;</span><span class="p">:</span> <span class="mi">84</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>Simple filtering:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">json</span> <span class="o">|</span> <span class="n">jq</span> <span class="s">&#39;.skills[].category&#39;</span>

<span class="n">Python</span>
<span class="n">Go</span>
</pre></div>
<p>Filtering with index:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">json</span> <span class="o">|</span> <span class="o">./</span><span class="n">jq</span> <span class="s">&#39;.[&quot;skills&quot;][0][&quot;tests&quot;][1] | .name, .score&#39;</span>

<span class="s">&quot;Two&quot;</span>
<span class="mi">96</span>
</pre></div>
<p>...or a different flavour:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">json</span> <span class="o">|</span> <span class="o">./</span><span class="n">jq</span> <span class="s">&#39;.skills[0].tests[1] | .name, .score&#39;</span>

<span class="s">&quot;Two&quot;</span>
<span class="mi">96</span>
</pre></div>
<p>Built-in operators:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">json</span> <span class="o">|</span> <span class="o">./</span><span class="n">jq</span> <span class="s">&#39;.interests | length&#39;</span>

<span class="mi">3</span>
</pre></div>
<p>Manipulate JSON string:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">json</span> <span class="o">|</span> <span class="o">./</span><span class="n">jq</span> <span class="s">&#39;if .registered == true then .skills[].tests[].score = 1000 else null end&#39;</span> <span class="o">&gt;</span> <span class="n">new_sample</span><span class="o">.</span><span class="n">json</span>
</pre></div>
<p>Head on and read the <a class="reference external" href="http://stedolan.github.io/jq/manual/">jq manual</a> if you
want to include it in your tester toolbox.</p>

        </section>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'danclaudiupop';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><footer class="footer">
    &copy; blog.danclaudiupop &ndash;
        Proudly published with <a href="http://blog.getpelican.com/">Pelican</a>
</footer>    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62968573-1', 'auto');
  ga('send', 'pageview');

</script>
    <!-- End Document
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
